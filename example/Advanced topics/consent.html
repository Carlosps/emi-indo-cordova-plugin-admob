<html>
<head>
    <script type="text/javascript" src="cordova.js"></script>
</head>
<body>

<script>

// Installation

// cordova plugin add emi-indo-cordova-plugin-consent
// cordova plugin add emi-indo-cordova-plugin-admob


let _getConsentRequest = () => {
    cordova.plugins.emiAdmobPlugin.getConsentRequest(
    // Setting Targeting in Device Ready

    (status) => { alert(status) }, // check event code
    (error) => { alert(error)

    });
}

// call _getConsentRequest();



let _consentReset = () => {
    cordova.plugins.emiAdmobPlugin.consentReset();
}

// call _consentReset();







      /////  >>>>>> Device Ready <<<<<<

document.addEventListener("deviceready", function(){

cordova.plugins.emiAdmobPlugin.initialize();

cordova.plugins.emiAdmobPlugin.targeting(
    TagForChildDirectedTreatment = 0, // value: 0 | -1 | 1
    TagForUnderAgeOfConsent = 0, // // value: 0 | -1 | 1
    MaxAdContentRating = "G", // value: G | MA | PG | T | ""

    // Optional
    (info) => { console.log(info)},
    (error) => { console.log(error)

    });
	
	
	
	
	
	
	
	
	
	// Consent Event 
	
	
/*
on.consent.info.update
on.consent.info.update.failed

on.consent.status.not_required
on.consent.status.obtained
on.consent.status.required
on.consent.status.unknown

on.consent.failed.show
on.consent.failed.load.from
on.consent.form.not.available
*/
	

document.addEventListener('on.consent.info.update', () => {

alert("on.consent.info.update");

});

document.addEventListener('on.consent.info.update.failed', () => {

alert("on.consent.info.update.failed");

});

////////////////////////////////////////////////

// https://developers.google.com/admob/android/privacy/api/reference/com/google/android/ump/ConsentInformation.ConsentStatus

document.addEventListener('on.consent.status.not_required', () => {
// Constant Value: 1
alert("User consent not required.");

});

document.addEventListener('on.consent.status.obtained', () => {
// Constant Value: 3
alert("User consent obtained. Personalized vs non-personalized undefined.");

});

document.addEventListener('on.consent.status.required', () => {
// Constant Value: 2
// is Consent Form Available = the code auto, load Consent Form and consent Form show.
alert("User consent required but not yet obtained.");

});

document.addEventListener('on.consent.status.unknown', () => {
//Constant Value: 0
alert("Consent status is unknown.");

});







}, false);
</script>



<p> <button onclick="_getConsentRequest();">get Consent Request</button></p>

<p> <button onclick="_consentReset();">Consent reset</button></p>




</body>
</html>